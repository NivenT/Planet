def run() {
    var fx = AGENT_NORMAL_ACCELERATION * self.getMass();
    self.applyForce(fx, 0);

    var vel = self.getVelocity();
    if (vel.x > self.max_speed) {
        self.setVelocity(vec2(self.max_speed, vel.y));
    } else if (vel.x < -self.max_speed) {
        self.setVelocity(vec2(-self.max_speed, vel.y));
    }
}

run